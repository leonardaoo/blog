<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>å°†è¿›é…’</title>
    <!-- GitHub é£æ ¼æ ·å¼ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@5.5.1/github-markdown.min.css">
    <!-- å¼•å…¥vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/style_article.css">
    <script src="/JS/main.js" defer></script>
    <style>
        body {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }

        .markdown-body {
            background-color: #fff;
            padding: 40px;
            border-radius: 10px;
            max-width: 800px;
            margin: 0 auto;
        }
    </style>
</head>
<!-- è®°å¾—è¦æŒ‚è½½id -->

<body id="app">

    <header>
        <h1>æˆ‘çš„ä¸ªäººåšå®¢</h1>
    </header>
    <button @click="toggleTheme">{{change?"ç™½è‰²":"é»‘è‰²"}}ä¸»é¢˜</button>
    <nav>
        <a href="../index.html">é¦–é¡µ</a>
        <a href="../about.html">å…³äºæˆ‘</a>
    </nav>

    <div id="content" class="markdown-body">
        æ­£åœ¨åŠ è½½æ–‡ç« ...
    </div>
    <!-- å¼•å…¥ marked.js -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script>
        // è·å– URL ä¸­çš„å‚æ•°ï¼Œæ¯”å¦‚ ?name=01 è¡¨ç¤ºåŠ è½½ 01.md
        const params = new URLSearchParams(window.location.search);
        const name = params.get("name") || "01";  // é»˜è®¤åŠ è½½ 01.md
        const mdPath = `/article/${name}.md`;

        fetch(mdPath)
            .then(response => {
                if (!response.ok) {
                    throw new Error('æ–‡ç« åŠ è½½å¤±è´¥');
                }
                return response.text();
            })
            .then(markdown => {
                document.getElementById('content').innerHTML = marked.parse(markdown);
            })
            .catch(err => {
                document.getElementById('content').innerHTML = `<p style="color:red;">${err.message}</p>`;
            });
    </script>


    <main class="comment-container">
        <h2>ç•™è¨€æ¿</h2>

        <!-- è¾“å…¥æ–°ç•™è¨€ -->
        <div class="comment-input">
            <input v-model="newMessage" @keyup.enter="appear" placeholder="å†™ç‚¹ä»€ä¹ˆ..." />
            <button @click="appear">æäº¤</button>
        </div>

        <!-- ç•™è¨€åˆ—è¡¨ -->
        <ol class="comment-list">
            <li v-for="(message, index) in messages" :key="message._id" class="comment-item">
                <div class="comment-main">
                    <p><strong>{{ message.username }}</strong>: {{ message.content }}</p>


                    <!-- å³ä¸‹è§’ â‹¯ æŒ‰é’® -->
                    <!-- â‹¯ èœå•è§¦å‘ + å¼¹çª— -->
                    <div class="comment-actions">
                        <span class="menu-trigger">â‹¯</span>
                        <div class="menu-popup"> <!-- ä¸å†ç”¨ v-if æ§åˆ¶ -->
                            <button @click="likeMessage(index)">ğŸ‘ {{ message.likes }}</button>
                            <button @click="setReplyTo(index)">ğŸ’¬ å›å¤</button>
                            <button @click="deleteMessage(index)">ğŸ—‘ åˆ é™¤</button>
                        </div>
                    </div>

                </div>

                <!-- å­è¯„è®ºåˆ—è¡¨ -->
                <ul class="reply-list">
                    <li v-for="(reply, rIndex) in message.replies" :key="rIndex" class="reply-item">
                        <strong>{{ reply.username }}</strong>: {{ reply.content }}
                    </li>
                </ul>

                <!-- å›å¤è¾“å…¥æ¡† -->
                <div v-if="replyToIndex === index" class="reply-input">
                    <input v-model="replyContent" placeholder="å›å¤..." @keyup.enter="submitReply(index)" />
                    <button @click="submitReply(index)">å‘é€</button>
                </div>
            </li>
        </ol>
    </main>



</body>

</html>